<a name="logo"></a>
<img src="../../images/logo.png" height="50" /> 

> [河北师范大学软件学院 - Spring面试题](../readme.md#logo)

#### Spring 框架中有哪些不同类型的事件？

Spring 的 ApplicationContext 提供了支持事件和代码中监听器的功能。我们可以创建 bean 用来监听在 ApplicationContext 中发布的事件。ApplicationEvent 类和在 ApplicationContext 接口中处理的事件，如果一个 bean 实现了 ApplicationListener 接口，当一个 ApplicationEvent 被发布以后，bean 会自动被通知。

``` Java
public class AllApplicationEventListener implements ApplicationListener <ApplicationEvent > {
	@Override
	public void onApplicationEvent(ApplicationEvent applicationEvent)
	{
		//process event
	}
}
```

Spring 提供了以下 5 中标准的事件：

1. 上下文更新事件（ContextRefreshedEvent）：该事件会在 ApplicationContext 被初始化或者更新时发布。也可以在调用 ConfigurableApplicationContext 接口中的 refresh()方法时被触发。
2. 上下文开始事件（ContextStartedEvent）：当容器调用ConfigurableApplicationContext的 Start()方法开始/重新开始容器时触发该事件。
3. 上下文停止事件（ContextStoppedEvent）：当容器调ConfigurableApplicationContext的 Stop()方法停止容器时触发该事件。
4. 上下文关闭事件（ContextClosedEvent）：当 ApplicationContext 被关闭时触发该事件。容器被关闭时，其管理的所有单例 Bean 都被销毁。
5. 请求处理事件（RequestHandledEvent）：在 Web 应用中，当一个 http 请（request）结束触发该事件。除了上面介绍的事件以外，还可以通过扩展 ApplicationEvent 类来开发自定义的事件。

``` Java
public class CustomApplicationEvent extends ApplicationEvent{
	public CustomApplicationEvent ( Object source, final String msg ){
		super(source);
		System.out.println("Created a Custom event");
	}
}
```

为了监听这个事件，还需要创建一个监听器：

``` Java
public class CustomEventListener implements ApplicationListener <CustomApplicationEvent > {
	@Override
	public void onApplicationEvent(CustomApplicationEvent applicationEvent) {
		//handle event
	}
}
```

之后通过 applicationContext 接口的 publishEvent()方法来发布自定义事件。

``` Java
CustomApplicationEvent customEvent = new CustomApplicationEvent(applicationContext,“Test message”);
applicationContext.publishEvent(customEvent);
```